<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.runjian.auth.server.mapper.MenuInfoMapper">

    <select id="selectByAppId" resultType="com.runjian.auth.server.domain.entity.MenuInfo">
        SELECT
            menu.id,
            menu.app_id,
            menu.menu_pid,
            menu.menu_pids,
            menu.menu_sort,
            menu.name,
            menu.leaf,
            menu.path,
            menu.component,
            menu.name,
            menu.icon,
            menu.title,
            menu.level,
            menu.hidden,
            menu.status
        FROM
            menu_info menu
        <where>
            menu.delete_flag = 0
            AND menu.hidden = 0
            AND menu.status = 0
            <if test="appId != null">
                AND menu.app_id = #{appId,jdbcType=BIGINT}
            </if>
        </where>
        ORDER BY menu.level,menu.menu_sort,menu.id
    </select>
</mapper>
